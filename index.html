<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Tile PDF Manager</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <style>
        :root {
            --primary-blue: #1e3a8a;
            --secondary-blue: #3b82f6;
            --dark-bg: #0f172a;
            --glass-bg: rgba(30, 58, 138, 0.1);
            --glass-border: rgba(59, 130, 246, 0.2);
            --white: #ffffff;
            --text-light: rgba(255, 255, 255, 0.9);
            --text-muted: rgba(255, 255, 255, 0.7);
            --success: #10b981;
            --error: #ef4444;
            --whatsapp: #25D366;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1e293b 100%);
            color: var(--white);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 50px 0;
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
            margin-bottom: 50px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="tile" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect width="20" height="20" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23tile)"/></svg>');
            opacity: 0.3;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, var(--white), rgba(255, 255, 255, 0.8));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
        }

        .header p {
            font-size: 1.2rem;
            color: var(--text-muted);
            max-width: 700px;
            margin: 0 auto 20px;
        }

        .status-badge {
            font-size: 0.9rem;
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid rgba(16, 185, 129, 0.2);
            display: inline-block;
            margin-top: 15px;
        }

        /* Setup Section */
        .setup-section {
            margin-bottom: 40px;
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--secondary-blue), var(--success));
        }

        .setup-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .step-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            transition: all 0.3s ease;
        }

        .step-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
        }

        .step-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--secondary-blue);
            margin-bottom: 15px;
            display: block;
        }

        .step-card h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--white);
        }

        .step-card p {
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* Configuration */
        .config-form {
            background: rgba(59, 130, 246, 0.1);
            padding: 30px;
            border-radius: 16px;
            border: 1px solid rgba(59, 130, 246, 0.2);
            margin-bottom: 30px;
        }

        .config-form h3 {
            color: var(--secondary-blue);
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--white);
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            font-size: 1rem;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--secondary-blue);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--secondary-blue), var(--primary-blue));
            color: var(--white);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.5);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
            color: var(--white);
        }

        /* Processing Section */
        .processing-section {
            display: none;
            text-align: center;
            margin-bottom: 40px;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-blue), var(--success));
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .progress-details {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* Results Section */
        .results-section {
            display: none;
        }

        .size-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .size-card {
            position: relative;
            overflow: hidden;
        }

        .size-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }

        .size-icon {
            font-size: 2.8rem;
            margin-right: 20px;
            padding: 18px;
            background: linear-gradient(135deg, var(--secondary-blue), var(--primary-blue));
            border-radius: 16px;
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .size-info h3 {
            font-size: 1.6rem;
            margin-bottom: 8px;
            color: var(--white);
            font-weight: 700;
        }

        .size-info p {
            color: var(--text-muted);
            font-size: 1rem;
        }

        .size-dimensions {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 1.4rem;
            color: var(--secondary-blue);
            font-weight: 800;
            margin-bottom: 20px;
            padding: 18px;
            background: rgba(59, 130, 246, 0.15);
            border-radius: 12px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            text-align: center;
            letter-spacing: 1px;
        }

        .size-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--success);
            display: block;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .size-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn-download {
            flex: 1;
            background: linear-gradient(135deg, var(--secondary-blue), var(--primary-blue));
            color: var(--white);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        .btn-whatsapp {
            flex: 1;
            background: linear-gradient(135deg, var(--whatsapp), #128C7E);
            color: var(--white);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
        }

        /* Status Messages */
        .status-message {
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-weight: 600;
            display: none;
            align-items: center;
            gap: 10px;
        }

        .status-success {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: var(--success);
        }

        .status-error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: var(--error);
        }

        .status-info {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: var(--secondary-blue);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .setup-steps {
                grid-template-columns: 1fr;
            }

            .size-categories {
                grid-template-columns: 1fr;
            }

            .size-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>üöÄ Auto Tile PDF Manager</h1>
                <p>Automatic PDF splitting ‡§î‡§∞ size-wise organization ‚Ä¢ ‡§Ü‡§™ ‡§∏‡§ø‡§∞‡•ç‡§´ master PDF upload ‡§ï‡§∞‡•á‡§Ç, ‡§¨‡§æ‡§ï‡•Ä ‡§∏‡§¨ automatic!</p>
                <div class="status-badge" id="systemStatus">
                    üîÑ System Ready for Auto-Processing
                </div>
            </div>
        </div>

        <!-- Status Messages -->
        <div class="status-message" id="statusMessage"></div>

        <!-- Setup Section -->
        <div class="setup-section">
            <div class="glass-card">
                <h2 style="text-align: center; margin-bottom: 30px; color: var(--white); font-size: 2rem;">
                    ‚öôÔ∏è Automatic Setup Process
                </h2>
                
                <div class="setup-steps">
                    <div class="step-card">
                        <span class="step-number">1</span>
                        <h3>Master PDF Upload</h3>
                        <p>‡§Ü‡§™ ‡§Ö‡§™‡§®‡•Ä master PDF ‡§ï‡•ã Google Drive ‡§™‡§∞ upload ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ public sharing link copy ‡§ï‡§∞‡•á‡§Ç</p>
                    </div>
                    <div class="step-card">
                        <span class="step-number">2</span>
                        <h3>Auto Detection</h3>
                        <p>System automatic ‡§∏‡§≠‡•Ä tile sizes detect ‡§ï‡§∞‡•á‡§ó‡§æ ‡§î‡§∞ pattern recognition use ‡§ï‡§∞‡•á‡§ó‡§æ</p>
                    </div>
                    <div class="step-card">
                        <span class="step-number">3</span>
                        <h3>Smart Splitting</h3>
                        <p>AI-powered splitting process ‡§ú‡•ã size-wise PDFs automatically generate ‡§ï‡§∞‡•á‡§ó‡§æ</p>
                    </div>
                </div>

                <div class="config-form">
                    <h3>üîó Master PDF Configuration</h3>
                    <div class="form-group">
                        <label for="masterPdfUrl">Google Drive Master PDF Sharing Link:</label>
                        <input type="url" id="masterPdfUrl" placeholder="https://drive.google.com/file/d/YOUR_FILE_ID/view?usp=sharing" />
                    </div>
                    <div class="form-group">
                        <label for="refreshInterval">Auto-Refresh Interval (minutes):</label>
                        <input type="number" id="refreshInterval" value="60" min="15" max="1440" />
                    </div>
                    <button class="btn btn-primary" onclick="startAutoProcessing()">
                        üöÄ Start Automatic Processing
                    </button>
                </div>
            </div>
        </div>

        <!-- Processing Section -->
        <div class="processing-section" id="processingSection">
            <div class="glass-card">
                <h2 style="text-align: center; margin-bottom: 30px; color: var(--white);">
                    ‚ö° Processing Master PDF...
                </h2>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">Initializing...</div>
                    <div class="progress-details" id="progressDetails">Please wait while we process your master PDF</div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="resultsSection">
            <div class="size-categories" id="sizeCategories">
                <!-- Dynamic content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            GOOGLE_DRIVE_API_KEY: 'YOUR_API_KEY', // Replace with your Google Drive API key
            MASTER_PDF_URL: '',
            AUTO_REFRESH_INTERVAL: 60,
            TILE_SIZES: [
                {
                    pattern: /800X3000X15/i,
                    size: '800X3000X15',
                    dimensions: '800 √ó 3000 √ó 15mm',
                    name: 'Large Format Premium',
                    icon: 'üìã',
                    description: 'Ultra-large tiles with premium thickness'
                },
                {
                    pattern: /800X2400X15/i,
                    size: '800X2400X15',
                    dimensions: '800 √ó 2400 √ó 15mm', 
                    name: 'Medium Format Premium',
                    icon: 'üìÉ',
                    description: 'Perfect balance of size and thickness'
                },
                {
                    pattern: /1200X1200X9/i,
                    size: '1200X1200X9',
                    dimensions: '1200 √ó 1200 √ó 9mm',
                    name: 'Square Format',
                    icon: '‚¨ú',
                    description: 'Perfect square tiles for contemporary designs'
                },
                {
                    pattern: /1200X1800X9/i,
                    size: '1200X1800X9',
                    dimensions: '1200 √ó 1800 √ó 9mm',
                    name: 'Medium Rectangular',
                    icon: 'üî∑',
                    description: 'Versatile rectangular format'
                },
                {
                    pattern: /1200X2400X9/i,
                    size: '1200X2400X9',
                    dimensions: '1200 √ó 2400 √ó 9mm',
                    name: 'Large Rectangular',
                    icon: 'üìÑ',
                    description: 'Large format for impressive installations'
                },
                {
                    pattern: /1200X2800X6/i,
                    size: '1200X2800X6',
                    dimensions: '1200 √ó 2800 √ó 6mm',
                    name: 'Extra Large Thin',
                    icon: 'üìú',
                    description: 'Ultra-wide format with optimized thickness'
                },
                {
                    pattern: /1200X3200X12/i,
                    size: '1200X3200X12',
                    dimensions: '1200 √ó 3200 √ó 12mm',
                    name: 'Ultra Large Premium',
                    icon: 'üìë',
                    description: 'Maximum size with premium thickness'
                }
            ]
        };

        let processedData = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            checkExistingData();
        });

        function setupEventListeners() {
            // Auto-refresh timer
            setInterval(() => {
                if (CONFIG.MASTER_PDF_URL && CONFIG.AUTO_REFRESH_INTERVAL > 0) {
                    autoRefreshCheck();
                }
            }, CONFIG.AUTO_REFRESH_INTERVAL * 60 * 1000);
        }

        function startAutoProcessing() {
            const masterUrl = document.getElementById('masterPdfUrl').value.trim();
            const refreshInterval = parseInt(document.getElementById('refreshInterval').value);

            if (!masterUrl) {
                showStatus('‡§ï‡•É‡§™‡§Ø‡§æ Master PDF URL enter ‡§ï‡§∞‡•á‡§Ç', 'error');
                return;
            }

            if (!masterUrl.includes('drive.google.com')) {
                showStatus('‡§ï‡•É‡§™‡§Ø‡§æ valid Google Drive URL enter ‡§ï‡§∞‡•á‡§Ç', 'error');
                return;
            }

            CONFIG.MASTER_PDF_URL = masterUrl;
            CONFIG.AUTO_REFRESH_INTERVAL = refreshInterval;

            // Hide setup, show processing
            document.querySelector('.setup-section').style.display = 'none';
            document.getElementById('processingSection').style.display = 'block';

            // Start processing
            processMasterPDF(masterUrl);
        }

        async function processMasterPDF(url) {
            try {
                // Step 1: Download PDF
                updateProgress(10, 'Master PDF download ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...', 'Google Drive ‡§∏‡•á file access ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç');
                await sleep(1000);

                // Step 2: Analyze PDF
                updateProgress(25, 'PDF content analyze ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...', 'Tile sizes ‡§î‡§∞ patterns detect ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç');
                await sleep(1500);

                // Step 3: Detect Sizes
                updateProgress(40, 'Tile sizes detect ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...', 'AI pattern recognition running...');
                const detectedSizes = await detectTileSizes(url);
                await sleep(1000);

                // Step 4: Split PDF
                updateProgress(60, 'Size-wise PDFs create ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...', `${detectedSizes.length} different sizes found`);
                await splitPDFBySizes(detectedSizes);
                await sleep(1500);

                // Step 5: Generate Download Links
                updateProgress(80, 'Download links generate ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...', 'Cloud storage setup ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç');
                await generateDownloadLinks();
                await sleep(1000);

                // Step 6: Complete
                updateProgress(100, 'Processing Complete! ‚úÖ', '‡§∏‡§≠‡•Ä size-wise PDFs ready ‡§π‡•à‡§Ç');
                await sleep(1000);

                // Show results
                showResults();

            } catch (error) {
                console.error('Processing error:', error);
                showStatus('‚ùå Processing ‡§Æ‡•á‡§Ç error ‡§Ü‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§ø‡§∞ ‡§∏‡•á try ‡§ï‡§∞‡•á‡§Ç‡•§', 'error');
                resetInterface();
            }
        }

        async function detectTileSizes(url) {
            // Simulate AI detection (in real implementation, you would use PDF parsing)
            const mockDetectedSizes = [
                { size: '800X3000X15', count: 38, pages: [1, 5, 12, 18, 25] },
                { size: '800X2400X15', count: 21, pages: [21, 22, 23] },
                { size: '1200X1200X9', count: 125, pages: [24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34] },
                { size: '1200X1800X9', count: 45, pages: [35, 36, 37, 38, 39, 40] },
                { size: '1200X2400X9', count: 67, pages: [41, 42, 43, 44, 45, 46, 47] },
                { size: '1200X2800X6', count: 89, pages: [48, 49, 50, 51, 52, 53, 54, 55] },
                { size: '1200X3200X12', count: 24, pages: [56, 57, 58, 59] }
            ];

            return mockDetectedSizes;
        }

        async function splitPDFBySizes(detectedSizes) {
            // Simulate PDF splitting process
            processedData = {};
            
            for (const sizeData of detectedSizes) {
                const sizeConfig = CONFIG.TILE_SIZES.find(s => s.size === sizeData.size);
                if (sizeConfig) {
                    processedData[sizeData.size] = {
                        ...sizeConfig,
                        designCount: sizeData.count,
                        totalPages: sizeData.pages.length,
                        fileSize: Math.floor(Math.random() * 5 + 1) + '.' + Math.floor(Math.random() * 9 + 1) + ' MB',
                        downloadUrl: `https://your-cloud-storage.com/split_${sizeData.size.toLowerCase()}.pdf`,
                        lastUpdated: new Date().toLocaleString('hi-IN')
                    };
                }
            }
        }

        async function generateDownloadLinks() {
            // Simulate cloud storage upload and link generation
            for (const [size, data] of Object.entries(processedData)) {
                // In real implementation, upload to cloud storage and get public URLs
                data.downloadUrl = `https://your-cloud-storage.com/tiles_${size.toLowerCase()}_${Date.now()}.pdf`;
            }
        }

        function showResults() {
            document.getElementById('processingSection').style.display = 'none';
            document.getElementById('resultsSection').style.display = 'block';
            renderSizeCategories();
            showStatus('‚úÖ Master PDF successfully processed ‡§î‡§∞ ‡§∏‡§≠‡•Ä size-wise PDFs ready ‡§π‡•à‡§Ç!', 'success');
        }

        function renderSizeCategories() {
            const container = document.getElementById('sizeCategories');
            container.innerHTML = '';

            Object.entries(processedData).forEach(([size, data]) => {
                const sizeCard = createSizeCard(data);
                container.appendChild(sizeCard);
            });
        }

        function createSizeCard(data) {
            const card = document.createElement('div');
            card.className = 'glass-card size-card';

            card.innerHTML = `
                <div class="size-header">
                    <div class="size-icon">${data.icon}</div>
                    <div class="size-info">
                        <h3>${data.name}</h3>
                        <p>${data.description}</p>
                    </div>
                </div>
                
                <div class="size-dimensions">${data.dimensions}</div>
                
                <div class="size-stats">
                    <div class="stat-item">
                        <span class="stat-number">${data.designCount}</span>
                        <span class="stat-label">Designs</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">${data.fileSize}</span>
                        <span class="stat-label">PDF Size</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">${data.totalPages}</span>
                        <span class="stat-label">Pages</span>
                    </div>
                </div>

                <div class="size-actions">
                    <button class="btn btn-download" onclick="downloadPDF('${data.size}', '${data.downloadUrl}')">
                        üì• Download PDF
                    </button>
                    <button class="btn btn-whatsapp" onclick="shareOnWhatsApp('${data.size}')">
                        üì± WhatsApp Share
                    </button>
                </div>
            `;

            return card;
        }

        // Download function
        function downloadPDF(size, downloadUrl) {
            const link = document.createElement('a');
            link.href = downloadUrl;
            link.download = `tiles_${size.toLowerCase()}.pdf`;
            link.target = '_blank';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            showStatus(`‚úÖ ${size} PDF download started!`, 'success');
        }

        // WhatsApp share function
        function shareOnWhatsApp(size) {
            const data = processedData[size];
            if (!data) return;

            const message = `üè† *${data.name} - Tile Collection*

üìè *Size:* ${data.dimensions}
üé® *Total Designs:* ${data.designCount}
üìÑ *PDF Pages:* ${data.totalPages}
üíæ *File Size:* ${data.fileSize}

‚ú® *Auto-Generated ‡§∏‡•á Fresh Data*
üìÖ *Last Updated:* ${data.lastUpdated}

üîó *Professional Catalog Available*
üìû *Contact for pricing and samples*

#TileCatalog #CeramicTiles #AutoGenerated`;

            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
            showStatus(`üì± ${data.name} shared on WhatsApp!`, 'success');
        }

        // Auto refresh check
        function autoRefreshCheck() {
            showStatus('üîÑ Checking for master PDF updates...', 'info');
            // In real implementation, check if master PDF was updated
            setTimeout(() => {
                showStatus('‚úÖ Catalog is up to date', 'success');
            }, 2000);
        }

        // Utility functions
        function updateProgress(percent, text, details) {
            document.getElementById('progressFill').style.width = percent + '%';
            document.getElementById('progressText').textContent = text;
            document.getElementById('progressDetails').textContent = details;
        }

        function showStatus(message, type) {
            const statusElement = document.getElementById('statusMessage');
            statusElement.textContent = message;
            statusElement.className = `status-message status-${type}`;
            statusElement.style.display = 'flex';
            
            setTimeout(() => {
                statusElement.style.display = 'none';
            }, 4000);
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function resetInterface() {
            document.querySelector('.setup-section').style.display = 'block';
            document.getElementById('processingSection').style.display = 'none';
            document.getElementById('resultsSection').style.display = 'none';
        }

        function checkExistingData() {
            // Check if there's already processed data in localStorage
            const stored = localStorage.getItem('processedTileData');
            if (stored) {
                processedData = JSON.parse(stored);
                if (Object.keys(processedData).length > 0) {
                    showResults();
                    showStatus('üìã Existing processed data loaded', 'info');
                }
            }
        }

        // Save data to localStorage
        function saveProcessedData() {
            localStorage.setItem('processedTileData', JSON.stringify(processedData));
        }

        // Auto-save every time data changes
        setInterval(saveProcessedData, 30000);
    </script>
</body>
</html>
